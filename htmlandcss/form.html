<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register form</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="form.css">

</head>
<body>
   <div class="container"> 
<div class="register"> <img src="./assets/logo2.png"width="" alt="">
    <span class="signup">Sign In</span>
</div>




<form id = "myForm">
    <div class="user-details">
        <div class="input-box">
            <span class ="details">Full Name</span>
            <input type="text" name="username" placeholder="Enter your Full Name"required>
        </div>
        <div class="input-box">
            <span class ="details">User Name</span>
            <input type="text" placeholder="Enter your User Name"required>
        </div>
        <div class="input-box">
            <span class ="details">Email</span>
            <input type="email" name="email"placeholder="Enter your email"  required>
        </div>
        <div class="input-box">
            <span class ="details">Phone Number</span>
            <input type="tel" name ="contactno" placeholder="Enter your Phone Number " pattern="[0-9]{10}" required>
        </div>
        <div class="input-box">
            <span class ="details">Password</span>
            <input type="password"name="password" placeholder="Enter your Password"required>
        </div>
        <div class="input-box">
            <span class ="details">Confirm Password</span>
            <input type="password" name="confirmPassword" placeholder="Confirm Your Password"required>
        </div>
    </div>
        <div ><span class="Gender">Gender</span> </div>
        
            
           
                <div class="gender">
                    <input type="radio" name="gender" id="male" checked="checked">
                    <label for="male">Male</label>

                
                
            
                
                    <input type="radio" id="Female" name="gender">
                        <label for="Female">Female</label>
                
                
        
                    <input type="radio" id="Prefer Not to say" name="gender">
                    <label for="Prefer Not to say">Prefer Not to say</label>
                    
               
                
            
        </div>
        <div class="button">
            <input type ="submit" value="Sign Up" onclick="validateForm()">
           </div>

    </div>
    
   

</form>
   </div>
   <script>
    
    function validateForm() {
        var phoneNumberInput = document.getElementsByName("contactno")[0]; // Get the first element with the name "contactno"
        
        if (!phoneNumberInput.checkValidity()) {
            alert("Please enter a valid 10-digit phone number.");
            return;
        }

        var password = document.getElementsByName("password").value;
        var confirmPassword = document.getElementsByName("confirmPassword").value;
        var emailInput=document.getElementsByName("email").value;

        // Regular expression for password validation
        var passwordRegex = /^(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+])[A-Za-z\d!@#$%^&*()_+]{6,}$/;

        if (!passwordRegex.test(password)) {
            alert("Password must start with a capital letter, contain at least one digit and one special character, and be at least 6 characters long.");
            return;
        }

        if (password !== confirmPassword) {
            alert("Passwords do not match.");
            return;
        }

        // If all validations pass, submit the form
        var form = document.getElementById("myForm");
        form.submit();
    }

    // Event listener for form submission
    document.getElementById("myForm").addEventListener("submit", function(event) {
    // Prevent the default form submission behavior
    event.preventDefault();
    //localStorage.clear();
    // Retrieve user details from the form
    var email = document.querySelector("input[name='email']").value;
    var password = document.querySelector("input[name='password']").value;
    var username = document.querySelector("input[name='username']").value;

    // Store user details in local storage
    try {
        // Retrieve existing user data from local storage
        var previousUserDetails = JSON.parse(localStorage.getItem("userDetails")) || [];
        console.log(previousUserDetails);
        if (!Array.isArray(previousUserDetails)) {
            previousUserDetails = [];
        }
        // Combine the new user data with the existing data
        var combinedUserData = [...previousUserDetails, { email: email, password: password, username:username }];

        // Store the combined user data in local storage
        localStorage.setItem("userDetails", JSON.stringify(combinedUserData));

        // Clear input fields
        this.reset();

        // Redirect to loginform.html after successful form submission
        window.location.href = "loginform.html";
    } catch (error) {
        // Handle errors during storage
        console.error("Error storing user details:", error);
        alert("An error occurred while processing your request. Please try again later.");
    }
});

</script>

</script>
</body>
</html>